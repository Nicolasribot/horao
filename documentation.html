<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Horao : Oslandia's 3D visualisation stack" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Horao</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Oslandia/horao">View on GitHub</a>

          <h1 id="project_title">Horao</h1>

          <a href="index.html">About</a> | <a href="authors.html">Authors</a> | <a href="documentation.html">Documentation</a> | <a href="dev.html">Development</a> | <a href="screencast.html">Screencast</a> | <a href="installation.html">Installation</a>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Oslandia/horao/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Oslandia/horao/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<h3>Documentation</h3>


<h4>QGIS Plugin</h4>

<p>The qgis plugin has no options an just needs to be launched from QGIS. If an elevation layer is present, the terrain will be modelled.</p>


<h4>Standalone viewer</h4>

<h5>Overview</h5>
<p>The viewer can also be used standalone (i.e. without QGIS). </p>
<ul>
    <li>layers can be added, removed or hidden using their ID</li>
    <li>3D models come either from postgis DB or from file</li>
    <li>data loading can be long, therefore tiles are added to the scenegraph when needed (using LOD)</li>
</ul>

<p>
The viewer reads commands from standard input. The general syntax for commands is:</p>

<code>command_name arg1="value1" arg2="value2" ...</code></p>

<p>Please note that:</p>
<ul>
    <li> the command is interpreted at the end of the line with the character <code>\n</code></li>
    <li> line ending with backslash <code>\</code> are continued on the next line (like C macros, or shell lines)</li>
    <li> line starting with dash <code>#</code> are comments</li>
    <li> values are XML attributes. It follows the rules of XML attribute escaping (e.g. <code>&#38quot;</code> for <code>"</code>)</li>
</ul>

<p>Each command returns a line giving their status, with the following syntax (return arguments are optional) :</p>
<ul>
    <li> in case of success :
    <code>< ok ret_arg1="value1" ret_arg2="value2" ... /></code>
    </li>
    <li> in case of failure :
    <code>< error msg="error message" ret_arg1="value1" ... /></code>
    </li>
</ul>

<h5>List of available commands</h5>

<h6>loadVectorPostgis</h6>

<p>Load a vector layer from disk/db and add it to the scene. With level of detail (LOD) option, even if there is only one level, the data are loaded by tiles (nearest tiles first).</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
    <li><strong>conninfo="string"</strong> postgresql connection info e.g. "dbname='mydb' host='locahost' user='me'."</li>
    <li><strong>origin="float float float"</strong> "x y z" position of the origin of the layer in the 3D scene (please note that the 3D coordinates of points on the graphics card are usually floats with 32bit precision, due to that the scene should be as close to the scene origin as possible to minimize rounding errors).</li>
</ul>
<p>additional arguments without LOD:</p>
<ul>
    <li><strong>query="string"</strong> SQL query.</li>
</ul>
<p>additional arguments with LOD:</p>
<ul>
    <li><strong>lod="distance1 distance2 dtistance3..."</strong> lod1 will be desplayed between distance1 and distance2, lod2 between ditance2 and distance3 (from the farest to the nearest)</li>
    <li><strong>extent="float float,float float"</strong> "xmin ymin,xmax ymax" of the layer, this will be used to compute tiles coordinates and fetch only data in the given extent (i.e. not the complete query result).</li>
    <li><strong>tile_size="float"</strong> the size of a tile (in map units)</li>
    <li><strong>query_0="string"</strong> SQL query for first level of detail (far).</li>
    <li><strong>query_1="string"</strong> SQL query for second level of detail (closer).</li>
    <li><strong>query_<i>N</i>="string"</strong> SQL query for <i>N</i>th level of detail.</li>
</ul>

<p>optional arguments:</p>
<ul>
    <li><strong>geocolumn="string"</strong> name of the geometry column ("geom" by default).</li>
    <li><strong>file="string"</strong> elevation file to drape 2D objects on.</li>
</ul>


<h6>loadElevation</h6>

<p>Build a terrain, based on a raster with altitude data</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
    <li><strong>file="string"</strong> if a .tif elevation file is specified and a .ive file (generated with osgdem from Virtual Planet Builder) with hte same basename is present, the .ive file will be used.</li>
    <li><strong>origin="float float float"</strong> see loadVectorPostgis</li>
    <li><strong>extent="float float,float float"</strong> "xmin ymin,xmax ymax" of the layer, this will be used to compute tiles coordinates and fetch only data in the given extent.</li>
</ul>
 
<p>without LOD:</p>
<ul>
    <li><strong>mesh_size="float"</strong> the size of the triangles used to render the surface (in map units).</li>
</ul>

<p>with LOD:</p>
<ul>
    <li><strong>lod="distance1 distance2 dtistance3..."</strong> see loadVectorPostgis.</li>
    <li><strong>tile_size="float"</strong> see loadVectorPostgis</li>
    <li><strong>mesh_size_0="float"</strong> the size of the triangles used to render the surface (in map units) at the first level of detail.</li>
    <li><strong>mesh_size_1="float"</strong> the size of the triangles used to render the surface (in map units) at the second level of detail.</li>
    <li><strong>mesh_size_<i>N</i>="float"</strong> the size of the triangles used to render the surface (in map units) at the <i>N</i>th level of detail.</li>
</ul>

<h6>loadFile</h6>

<p>Load an OSG file</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
    <li><strong>file="string"</strong> file path.</li>
    <li><strong>origin="float float float"</strong> see loadVectorPostgis</li>
</ul>

<h6>unloadLayer</h6>

<p>Unload a layer.</p> 

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
</ul>

<h6>showLayer</h6>

<p>Force the display of a layer</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
</ul>

<h6>hideLayer</h6>

<p>Force a layer to disappear. The layer is not unloaded. It can be showed afterward.</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
</ul>

<h6>setSymbology</h6>

<p>Sets the symbology of a (vector) layer</p>

<p>arguments:</p>
<ul>
    <li><strong>id="string"</strong> layer identifier.</li>
    <li><strong>fill_color_ambient="#rrggbb"</strong> color in html color format (e.g. "#FF0000" for red).</li>
    <li><strong>fill_color_diffuse="#rrggbb"</strong></li>
    <li><strong>fill_color_specular="#rrggbb"</strong></li>
    <li><strong>fill_color_shininess="float"</strong> value between 0 and 1.</li>
</ul>

<h6>addPlane</h6>

<p>Adds a simple plane to the scene</p>

<p>arguments:</p>
<ul>
<li> id</li>
    <li><strong>origin="float float float"</strong> "x y z" plane center in 3D scene coordinates.</li>
    <li><strong>extent="float float,float float"</strong> "xmin ymin,xmax ymax" of the plane</li>
</ul>

<h6>lookAt</h6>

<p>Sets the camera parameters</p>

<p>arguments:</p>
<ul>
    <li><strong>eye="float float float"</strong> "x y z" position of the camera</li>
    <li><strong>center="float float float"</strong> "x y z" coordinate to center of the view on.</li>
    <li><strong>up="x y z"</strong> direction that will appear vertical on the screen.</li>
</ul>
<p>alternate arguments:</p>
<ul>
    <li><strong>origin="float float float"</strong> "x y z" coordinate to center of the view on.</li>
    <li><strong>extent="float float,float float"</strong> "xmin ymin,xmax ymax" of viewed plane.</li>
</ul>

<h6>addSky</h6>

<p>Add a sky to scene. The sky is composed of images projected on the inside of a cube center on the 3D scene origin.</p>

<p>arguments:</p>
<ul>
    <li><strong>radius="float"</strong> distance of the cube faces from the 3D scene origin.</li>
    <li><strong>image="string"</strong> basename of the image, e.g. if image="sky.png", images posX_sky.png, negX_sky.png, posY_sky.png, negY_sky.png, posZ_sky.png and negZ_sky.png must exist in a directory listed in OSG_FILE_PATH</li>
</ul>


<h6>writeFile</h6>

Write scene to file. 
<p>arguments:</p>
<ul>
    <li><strong>file="string"</strong> file path (the file extension is used by osg drivers to determine export format).</li>
</ul>


      </section>
    </div>

  </body>
</html>
